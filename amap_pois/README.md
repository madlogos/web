# 高德地图展示poi

## 痛点

在上海买一辆电动车，是非常值得吐槽的。外地一般可以在购买点一条龙办完所有事项。可在上海，必须大费周章地骑到十多公里外申请一个铁牌，然后再大费周章地回购买点装上去。超标车还得跑到另一个专门的安装点去装。这就已经够折腾了，而更大的问题是，**上牌服务点从来找不到官方单点动态更新的信息**。我甚至不知道究竟该去哪儿办这个牌。目前为止最官方的是一则2019年的[通告](https://sh.122.gov.cn/cmspage/jsjy/2019-04-25/20190425006682.html)。但信息已经过时，比如松江交警六大队这个点，一年后已经失效。我最熟悉的闵行服务点，从漕宝路改到古美，又改到鹤庆路。另一个问题是，即使从本地宝之类地方找到了信息，**也只是一张地址列表**。每个点都在十公里以外，我怎么一目了然地知道哪里是最近的？

所以我做了一个网页地图版，把这些信息放在高德地图上。

## 用法

这就是一张静态地图，不需要服务器。点开来，搜索或定位到自己的位置，缩放地图找到离自己最近的服务点。点击服务点，弹窗会显示其信息。打开一个地图app，查一下路线，骑车摸过去就行了。

## 开发

这个工具当然也可以用来做二次开发。它可以用来呈现自己的门店、供应商或客户。当然，数量不能太多——地图上会很拥挤。

核心信息在point.xlsx里，维护Sheet1的表格。

name | lng | lat | addr | intro | type | style | json
-----|-----|-----|------|-------|------|-------|-------
浦东交警非机动车管理所 | 121.606804 | 31.218487 | 浦东新区龙东大道1920号 | 不受理 | 5

- name: poi的名称，会显示在弹窗标题
- lng: 经度（x坐标）
- lat: 纬度（y坐标）
- addr: 地址，会显示在弹窗正文
- intro: 备注信息，会显示在弹窗正文
- type: 类型
- style: 0-5，分别对应于 static/img文件夹里pin0 - pin5六种图标
- json: 公式列，自动生成

经纬度一般需要用高德地图的web service api来获取，也可以通过[高德地图的示例页面](https://lbs.amap.com/console/show/picker)来逐点提取，获得的是火星坐标（GCJ-02）。

维护完之后，将json列复制（不要整列复制）并粘贴到point.js里，替代 `var point=[...]`中...的部分。保存后再刷新index.html即完成刷新。

当然，还可以进一步修改index.html，以实现更多功能。
